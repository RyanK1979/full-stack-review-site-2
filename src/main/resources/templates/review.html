<!DOCTYPE HTML>

<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="utf-8"></meta>
	<meta name="viewport"
		content="width=device-width, intial-scale=1"></meta>
		<link rel="stylesheet" href="./css/layout.css"></link>
		<link rel="stylesheet" href="./css/style.css"></link>
	<title>Ryan's Entertainment Reviews</title>
</head>
<body>
	<div class="container">
	<header class="header">
		<h1>Ryan's review of </h1> 
	</header>
		<div id="review-content">
		<h2 class="title" th:text="${review.name}"></h2> 
		<p th:text="${review.review}"></p>
		<img class="photo" th:src="${review.image}" width="500px" height="300px"/>
		</div>
		
		<div class="comment-form-section">
		
			<form class="add-comment" method="post">
				<p><input type="text" name="userName" placeholder="What is your name?"></input></p>
				<p><textarea name="comment-content" id="comment-content" placeholder="What are your thoughts on this show?"></textarea></p>
				<p><input th:formaction="@{'/review/' + ${review.id} + '/addcomment'}" type="submit" value="Post Comment"></input></p>
			</form>
			<div id="comment-section"></div>
				<h3>Comment section</h3>
				<div class="single-comment" th:each="comment: ${review.comment}">
					<span id="comment-top-row">
						<span><strong>Name:</strong></span>
						<span th:text="${comment.posterName}"></span>
					</span>
					<form action="POST">
						<button type="submit" class="comment-delete-button" th:formaction="@{'/review/' + ${review.id} + '/deletecomment/' +${currentComment.id}}">
							<strong>X</strong>
						</button>	
					</form>				
				</div>
				
				<p class="comment-text" th:text="${comment.text"></p>
		
		</div>
		
		<div class="add-remove-tags">
			<form class="remove-tag" method="post">
				<input name="reviewId" type="hidden" th:value="${review.id}" />
				<ul class="content-list-items">
					<li th:each="tag: ${review.tags}"><a th:href="@{/tag(id=${tag.id})}" th:text="${tag.tag}"></a>
					<button id="remove-tag-button" name="tagId" th:value="${tag.id}" th:formaction="@{/remove-tag}">X</button></li>
				</ul>
			</form>
			<form method="POST">
				<input name="id" type="hidden" th:value="${review.id}" /> 
				<input type="text" name="tag" placeholder="Add a tag" />
				<button th:formaction="@{/add-tag}">Add</button>
			</form>
		</div>

	<footer class="footer">	
		<h2><a href="http://localhost:8080/reviews">Back to Reviews</a></h2>	
	</footer>
</div>
<script src="js/app.js"></script>
</body>
</html>